<!doctype html>
<html class="no-js" lang="">




<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Xmee | Login and Register Form Html Templates</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Favicon -->
    <link rel="shortcut icon" type="image/x-icon" href="img/favicon.png">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <!-- Fontawesome CSS -->
    <link rel="stylesheet" href="css/fontawesome-all.min.css">
    <!-- Flaticon CSS -->
    <link rel="stylesheet" href="font/flaticon.css">
    <!-- Google Web Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&amp;display=swap" rel="stylesheet">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="style.css">
</head>

<body>
    
    <div id="preloader" class="preloader">
        <div class='inner'>
            <div class='line1'></div>
            <div class='line2'></div>
            <div class='line3'></div>
        </div>
    </div>
    <section class="fxt-template-animation fxt-template-layout24" data-bg-image="img/figure/bg23-I2.jpg">
        
        <div class="fxt-video-background">
            <div class="fxt-video">
                <div id="fxtVideo" data-property="{
                    videoURL:'F_7ZoAQ3aJM', 
                    autoPlay:true, 
                    mute:true, 
                    loop:true, 
                    startAt:0, 
                    opacity:1, 
                    quality:'default', 
                    showControls:false, 
                    optimizeDisplay:true,
                    containment:'.fxt-video-background'
                }">
                </div>
            </div>
        </div>
        <!-- Video Area Start Here -->
        <div class="container">
            <div class="row align-items-center justify-content-center">
                <div class="col-lg-3">
                    <div class="fxt-header">
                        <a href="login-24.html" class="fxt-logo"><img src="img/forget.png" alt="Logo"></a>
                    </div>
                </div>
                <div class="col-lg-6">
                    <div class="fxt-content">
                        <h2>Recover your password</h2>
                        <div class="fxt-form">
                            <form method="POST">
                                <div class="form-group">
                                    <div class="fxt-transformY-50 fxt-transition-delay-1">
                                        <input type="email" id="email" class="form-control" name="email" placeholder="Email" required="required">
                                        
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="fxt-transformY-50 fxt-transition-delay-4">
                                        <button type="button" onclick="startCountdownAndSendEmail()" class="fxt-btn-fill">Send Me Email</button>
                                    </div>
                                    <div style="text-align: center;"><p id="countdown" style="display: flex;justify-content: center;align-items: center;"></p></div>
                                </div>
                            </form>
                        </div>
                        <div class="fxt-footer">
                            <div class="fxt-transformY-50 fxt-transition-delay-9">
                                <p>Don't have an account?<a href="../Register/Register.html" class="switcher-text2 inline-text">Register</a></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- jquery-->
    <script src="js/jquery-3.5.0.min.js"></script>
    <!-- Bootstrap js -->
    <script src="js/bootstrap.min.js"></script>
    <!-- Imagesloaded js -->
    <script src="js/imagesloaded.pkgd.min.js"></script>
    <!-- YouTube js -->
    <script src="js/jquery.mb.YTPlayer.min.js"></script>
    <!-- Validator js -->
    <script src="js/validator.min.js"></script>
    <!-- Custom Js -->
    <script src="js/main.js"></script>

</body>




</html>

<script>


  async function startCountdownAndSendEmail() {
      try {
        await sendemail();
        startCountdown();
      } catch (error) {
        console.log("Failed to send email:", error);
      }
    }

    function sendemail() {
    
        
            var email = $("#email").val();
           
    
            var data = { email: email };
    
            $.ajax({
              url: "http://localhost:4000/sendemail",
              headers: {
                "Content-Type": "application/json",
              },
              type: "POST",
              data: JSON.stringify(data),
              success: function (data) {
                
              },
              error: function () {
                alert("Connection error");
              },
            });
          }

          function startCountdown() {
         var timeInMinutes = 1;
      var currentTime = Date.parse(new Date());
      var deadline = new Date(currentTime + timeInMinutes * 60 * 1000);

      var countdownElement = document.getElementById("countdown");

      var x = setInterval(function() {
        var now = new Date().getTime();
        var timeRemaining = deadline - now;

        var minutes = Math.floor((timeRemaining % (1000 * 60 * 60)) / (1000 * 60));
        var seconds = Math.floor((timeRemaining % (1000 * 60)) / 1000);

        countdownElement.innerHTML =  seconds + "s ";

        if (timeRemaining < 0) {
          clearInterval(x);
          countdownElement.innerHTML = "Check your email for the message 'Email Sent'";
        }
      }, 1000);
    }
    </script>